import{Aa as ae,Ba as se,Ca as M,D as X,Da as D,Ea as y,F as ie,Fa as p,Ga as c,Ha as q,Ia as l,J as P,Ja as d,Ka as le,La as C,Ma as de,Na as _,O as b,Oa as V,P as g,Pa as v,Qa as F,Ra as U,S as Z,Sa as R,Ta as me,Ua as j,Va as te,Wa as a,Xa as E,Ya as h,Z as x,Za as ce,_ as ee,_a as O,ab as pe,bb as T,ca as oe,cb as s,ja as re,ka as o,lb as ue,n as ne,pb as be,qb as ge,sa as f,ya as w,za as k}from"./chunk-TTBC6ZZG.js";var xe=["videoPlayer"],ye=["container"];function he(i,n){if(i&1){let e=C();l(0,"div",4)(1,"button",10),V("click",function(){b(e);let r=v();return g(r.togglePlay())}),l(2,"span",11),a(3,"play_arrow"),d()()()}}var A=class i{videoUrl=s("");thumbnailUrl=s("");timeUpdate=T();videoElement;containerElement;isPlaying=x(!1);isMuted=x(!1);progress=x(0);currentTimeLabel=x("00:00");totalTimeLabel=x("00:00");ngAfterViewInit(){let n=this.videoElement.nativeElement;n.ontimeupdate=()=>{n.duration&&this.progress.set(n.currentTime/n.duration*100),this.currentTimeLabel.set(this.formatTime(n.currentTime)),this.timeUpdate.emit(n.currentTime)},n.onloadedmetadata=()=>{this.totalTimeLabel.set(this.formatTime(n.duration))},n.onplay=()=>this.isPlaying.set(!0),n.onpause=()=>this.isPlaying.set(!1),n.onvolumechange=()=>this.isMuted.set(n.muted)}handleProgressBarClick(n){let e=this.videoElement.nativeElement,t=n.currentTarget.getBoundingClientRect(),r=(n.clientX-t.left)/t.width;e.currentTime=r*e.duration}togglePlay(){let n=this.videoElement.nativeElement;n.paused?n.play().catch(()=>{}):n.pause()}toggleMute(){let n=this.videoElement.nativeElement;n.muted=!n.muted}toggleFullscreen(){let n=this.containerElement.nativeElement;document.fullscreenElement?document.exitFullscreen():n.requestFullscreen().catch(()=>{})}seekTo(n){let e=this.videoElement.nativeElement;e.currentTime=n,e.paused&&e.play().catch(()=>{})}formatTime(n){if(isNaN(n))return"00:00";let e=Math.floor(n/60),t=Math.floor(n%60);return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-video-player"]],viewQuery:function(e,t){if(e&1&&F(xe,5)(ye,5),e&2){let r;U(r=R())&&(t.videoElement=r.first),U(r=R())&&(t.containerElement=r.first)}},inputs:{videoUrl:[1,"videoUrl"],thumbnailUrl:[1,"thumbnailUrl"]},outputs:{timeUpdate:"timeUpdate"},decls:16,vars:8,consts:[["container",""],["videoPlayer",""],[1,"w-full","bg-black","rounded-2xl","overflow-hidden","shadow-lg","group","relative","aspect-video"],[1,"w-full","h-full","object-cover",3,"click","src"],[1,"absolute","inset-0","bg-black/20","flex","items-center","justify-center","z-10","pointer-events-none"],[1,"absolute","bottom-0","left-0","right-0","p-4","bg-gradient-to-t","from-black/80","to-transparent","flex","items-center","gap-4","text-white"],[1,"material-symbols-outlined","cursor-pointer",3,"click"],[1,"h-1","flex-1","bg-white/30","rounded-full","overflow-hidden","cursor-pointer","group/progress","relative",3,"click"],[1,"h-full","bg-primary"],[1,"text-xs","font-medium"],[1,"pointer-events-auto","flex","shrink-0","items-center","justify-center","rounded-full","size-20","bg-primary","text-text-primary","shadow-xl","hover:scale-105","transition-transform","duration-200","pl-1",3,"click"],[1,"material-symbols-outlined","!text-[40px]"]],template:function(e,t){if(e&1){let r=C();l(0,"div",2,0)(2,"video",3,1),V("click",function(){return b(r),g(t.togglePlay())}),d(),w(4,he,4,0,"div",4),l(5,"div",5)(6,"span",6),V("click",function(){return b(r),g(t.togglePlay())}),a(7),d(),l(8,"div",7),V("click",function(u){return b(r),g(t.handleProgressBarClick(u))}),le(9,"div",8),d(),l(10,"span",9),a(11),d(),l(12,"span",6),V("click",function(){return b(r),g(t.toggleMute())}),a(13),d(),l(14,"span",6),V("click",function(){return b(r),g(t.toggleFullscreen())}),a(15," fullscreen "),d()()()}e&2&&(o(2),de("src",t.videoUrl(),re),o(2),k(t.isPlaying()?-1:4),o(3),h(" ",t.isPlaying()?"pause":"play_arrow"," "),o(2),me("width",t.progress(),"%"),o(2),ce("",t.currentTimeLabel()," / ",t.totalTimeLabel()),o(2),h(" ",t.isMuted()?"volume_off":"volume_up"," "))},styles:["[_nghost-%COMP%]{display:contents}"]})};var $=class i{title=s.required();levelText=s.required();durationText=s.required();static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-lesson-meta"]],inputs:{title:[1,"title"],levelText:[1,"levelText"],durationText:[1,"durationText"]},decls:19,vars:3,consts:[[1,"flex","flex-col","gap-4"],[1,"text-text-primary","dark:text-white","text-3xl","md:text-4xl","font-bold","leading-tight"],[1,"flex","flex-wrap","gap-3"],[1,"flex","h-9","items-center","justify-center","gap-x-2","rounded-full","bg-white","dark:bg-[#33332a]","border","border-[#e6e6e0]","dark:border-[#444]","px-4","shadow-sm"],[1,"material-symbols-outlined","text-text-secondary","dark:text-gray-300","!text-[20px]"],[1,"text-text-primary","dark:text-gray-200","text-sm","font-medium"],[1,"flex","h-9","items-center","justify-center","gap-x-2","rounded-full","bg-white","dark:bg-[#33332a]","border","border-[#e6e6e0]","dark:border-[#444]","px-4","shadow-sm","ml-auto","cursor-pointer","hover:bg-gray-50","dark:hover:bg-[#44443a]"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"h1",1),a(2),d(),l(3,"div",2)(4,"div",3)(5,"span",4),a(6,"signal_cellular_alt"),d(),l(7,"p",5),a(8),d()(),l(9,"div",3)(10,"span",4),a(11,"schedule"),d(),l(12,"p",5),a(13),d()(),l(14,"div",6)(15,"span",4),a(16,"share"),d(),l(17,"p",5),a(18,"Share"),d()()()()),e&2&&(o(2),E(t.title()),o(6),E(t.levelText()),o(5),E(t.durationText()))},styles:["[_nghost-%COMP%]{display:contents}"]})};function Ce(i,n){if(i&1&&a(0),i&2){let e=v();h(" (",e.badgeText(),") ")}}var Q=class i{iconName=s.required();title=s.required();description=s.required();buttonText=s.required();badgeText=s();static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-exercise-card"]],inputs:{iconName:[1,"iconName"],title:[1,"title"],description:[1,"description"],buttonText:[1,"buttonText"],badgeText:[1,"badgeText"]},decls:13,vars:5,consts:[[1,"bg-white","dark:bg-[#1e1e12]","rounded-2xl","p-6","border","border-[#f0f0eb]","dark:border-[#33332a]","shadow-sm","hover:shadow-md","transition-shadow","flex","flex-col","items-start","gap-4"],[1,"size-12","rounded-full","bg-[#f9f506]/20","flex","items-center","justify-center","text-[#d1ce05]","dark:text-primary"],[1,"material-symbols-outlined","!text-[28px]"],[1,"text-lg","font-bold","text-text-primary","dark:text-white","mb-1"],[1,"text-sm","text-text-secondary","dark:text-gray-400","leading-relaxed"],[1,"mt-auto","pt-2","w-full"],[1,"w-full","h-10","rounded-full","border","border-[#e6e6e0]","dark:border-[#444]","hover:bg-background-light","dark:hover:bg-[#33332a]","text-text-primary","dark:text-white","text-sm","font-bold","transition-colors"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"div",1)(2,"span",2),a(3),d()(),l(4,"div")(5,"h4",3),a(6),d(),l(7,"p",4),a(8),d()(),l(9,"div",5)(10,"button",6),a(11),w(12,Ce,1,1),d()()()),e&2&&(o(3),E(t.iconName()),o(3),E(t.title()),o(2),E(t.description()),o(3),h(" ",t.buttonText()),o(),k(t.badgeText()?12:-1))},styles:["[_nghost-%COMP%]{display:contents}"]})};var _e=(i,n)=>n.title;function Te(i,n){if(i&1&&q(0,"app-exercise-card",5),i&2){let e=n.$implicit;y("iconName",e.iconName)("title",e.title)("description",e.description)("buttonText",e.buttonText)("badgeText",e.badgeText)}}var W=class i{tasksCount=s(2);exercises=s.required();static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-exercises-section"]],inputs:{tasksCount:[1,"tasksCount"],exercises:[1,"exercises"]},decls:9,vars:1,consts:[[1,"flex","flex-col","gap-4"],[1,"flex","items-center","justify-between"],[1,"text-text-primary","dark:text-white","text-xl","font-bold"],[1,"text-sm","text-text-secondary","dark:text-gray-400","font-medium"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[3,"iconName","title","description","buttonText","badgeText"]],template:function(e,t){e&1&&(p(0,"div",0)(1,"div",1)(2,"h3",2),a(3,"Exercises"),c(),p(4,"span",3),a(5),c()(),p(6,"div",4),M(7,Te,1,5,"app-exercise-card",5,_e),c()()),e&2&&(o(5),h("",t.tasksCount()," Tasks available"),o(2),D(t.exercises()))},dependencies:[Q],styles:["[_nghost-%COMP%]{display:contents}"]})};var Ee=["videoPlayer"],z=class i{videoUrl=s("");title=s.required();levelText=s.required();durationText=s.required();thumbnailUrl=s("");exercises=s.required();timeUpdate=T();videoPlayer;static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-lesson-left-column"]],viewQuery:function(e,t){if(e&1&&F(Ee,5),e&2){let r;U(r=R())&&(t.videoPlayer=r.first)}},inputs:{videoUrl:[1,"videoUrl"],title:[1,"title"],levelText:[1,"levelText"],durationText:[1,"durationText"],thumbnailUrl:[1,"thumbnailUrl"],exercises:[1,"exercises"]},outputs:{timeUpdate:"timeUpdate"},decls:6,vars:7,consts:[["videoPlayer",""],[1,"flex","flex-col","gap-6"],[3,"timeUpdate","videoUrl","thumbnailUrl"],[3,"title","levelText","durationText"],[1,"h-px","w-full","bg-[#f0f0eb]","dark:bg-[#33332a]","my-2"],[3,"tasksCount","exercises"]],template:function(e,t){if(e&1){let r=C();p(0,"div",1)(1,"app-video-player",2,0),_("timeUpdate",function(u){return b(r),g(t.timeUpdate.emit(u))}),c(),q(3,"app-lesson-meta",3)(4,"div",4)(5,"app-exercises-section",5),c()}e&2&&(o(),y("videoUrl",t.videoUrl())("thumbnailUrl",t.thumbnailUrl()),o(2),y("title",t.title())("levelText",t.levelText())("durationText",t.durationText()),o(2),y("tasksCount",t.exercises().length)("exercises",t.exercises()))},dependencies:[A,$,W],styles:["[_nghost-%COMP%]{display:block;flex:1;overflow-y:auto;min-height:0;padding:1.5rem}@media(min-width:768px){[_nghost-%COMP%]{padding:2.5rem}}@media(min-width:1024px){[_nghost-%COMP%]{padding-right:1.5rem}}"]})};var we=(i,n)=>n.id;function ke(i,n){if(i&1){let e=C();p(0,"button",2),_("click",function(){let r=b(e).$implicit,m=v();return g(m.onTabClick(r.id))}),a(1),c()}if(i&2){let e=n.$implicit,t=v();y("ngClass",t.activeTab()===e.id?t.activeTabClasses:t.notActiveTabClasses),o(),h(" ",e.label," ")}}var B=class i{activeTab=s("transcript");tabChange=T();tabs=[{id:"transcript",label:"Transcript"},{id:"vocabulary",label:"Vocabulary"}];activeTabClasses="font-bold text-text-primary dark:text-white border-b-2 border-primary bg-primary/5";notActiveTabClasses="font-medium text-text-secondary dark:text-gray-400 hover:text-text-primary hover:bg-gray-50 dark:hover:bg-[#222]";onTabClick(n){this.tabChange.emit(n)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-sidebar-tabs"]],inputs:{activeTab:[1,"activeTab"]},outputs:{tabChange:"tabChange"},decls:3,vars:0,consts:[[1,"flex","border-b","border-[#e6e6e0]","dark:border-[#33332a]"],[1,"flex-1","py-4","text-sm","cursor-pointer",3,"ngClass"],[1,"flex-1","py-4","text-sm","cursor-pointer",3,"click","ngClass"]],template:function(e,t){e&1&&(p(0,"div",0),M(1,ke,2,2,"button",1,we),c()),e&2&&(o(),D(t.tabs))},dependencies:[ue],styles:["[_nghost-%COMP%]{display:contents}"]})};function Se(i,n){if(i&1&&(l(0,"div",5)(1,"p",6),a(2),d()()),i&2){let e=v();o(2),E(e.translation())}}var H=class i{timeLabel=s.required();start=s.required();text=s.required();translation=s();active=s(!1);dimmed=s(!1);seek=T();el=P(oe);constructor(){ee(()=>{this.active()&&setTimeout(()=>{this.el.nativeElement.scrollIntoView({behavior:"smooth",block:"center"})},100)})}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-transcript-item"]],inputs:{timeLabel:[1,"timeLabel"],start:[1,"start"],text:[1,"text"],translation:[1,"translation"],active:[1,"active"],dimmed:[1,"dimmed"]},outputs:{seek:"seek"},decls:8,vars:37,consts:[[1,"group","p-3","rounded-xl","cursor-pointer","transition-all","duration-300","border","my-1","scroll-mt-20",3,"click"],[1,"flex","gap-3"],[1,"text-xs","font-bold","pt-1","font-mono","transition-colors","duration-300"],[1,"transition-all","duration-300"],[1,"leading-relaxed","transition-all","duration-300"],[1,"overflow-hidden","transition-all","duration-300","max-h-20","opacity-100","mt-1"],[1,"text-sm","text-text-secondary","dark:text-gray-400","italic"]],template:function(e,t){e&1&&(l(0,"div",0),V("click",function(){return t.seek.emit(t.start())}),l(1,"div",1)(2,"span",2),a(3),d(),l(4,"div",3)(5,"p",4),a(6),d(),w(7,Se,3,1,"div",5),d()()()),e&2&&(j("bg-primary/10",t.active())("border-primary/20",t.active())("border-transparent",!t.active())("hover:bg-background-light",!t.active())("dark:hover:bg-[#25251a]",!t.active())("opacity-60",t.dimmed()&&!t.active()),o(2),j("text-text-primary",t.active())("dark:text-primary",t.active())("text-text-secondary",!t.active())("dark:text-gray-500",!t.active()),o(),h(" ",t.timeLabel()," "),o(2),j("text-lg",t.active())("font-medium",t.active())("text-text-primary",t.active())("dark:text-white",t.active())("text-base",!t.active())("text-text-primary",!t.active()&&!t.dimmed())("dark:text-gray-300",!t.active()),o(),h(" ",t.text()," "),o(),k(t.active()&&t.translation()?7:-1))},styles:["[_nghost-%COMP%]{display:block}"]})};function Me(i,n){if(i&1){let e=C();p(0,"app-transcript-item",2),_("seek",function(r){b(e);let m=v();return g(m.seek.emit(r))}),c()}if(i&2){let e=n.$implicit,t=v();y("timeLabel",t.formatTime(e.start))("start",e.start)("text",e.text)("active",t.currentTime()>=e.start&&t.currentTime()<e.end)("dimmed",t.currentTime()>e.end)}}var G=class i{subtitles=s.required();currentTime=s.required();seek=T();formatTime(n){let e=Math.floor(n/60),t=Math.floor(n%60);return`${e.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-transcript-list"]],inputs:{subtitles:[1,"subtitles"],currentTime:[1,"currentTime"]},outputs:{seek:"seek"},decls:3,vars:0,consts:[[1,"flex","flex-col","p-2","pb-24"],[3,"timeLabel","start","text","active","dimmed"],[3,"seek","timeLabel","start","text","active","dimmed"]],template:function(e,t){e&1&&(p(0,"div",0),M(1,Me,1,5,"app-transcript-item",1,ae),c()),e&2&&(o(),D(t.subtitles()))},dependencies:[H],styles:["[_nghost-%COMP%]{display:contents}"]})};var De=(i,n)=>n.word;function Le(i,n){i&1&&(l(0,"button",18)(1,"span",20),a(2,"check"),d()())}function Ne(i,n){i&1&&(l(0,"button",19)(1,"span",20),a(2,"add"),d()())}function Ve(i,n){if(i&1&&(l(0,"tr",11)(1,"td",12)(2,"div",13),a(3),d(),l(4,"div",14),a(5),d()(),l(6,"td",15)(7,"span",16),a(8),d()(),l(9,"td",17),w(10,Le,3,0,"button",18)(11,Ne,3,0,"button",19),d()()),i&2){let e=n.$implicit;o(3),E(e.word),o(2),E(e.translation),o(2),j("bg-green-100",e.level==="A1")("text-green-800",e.level==="A1")("dark:bg-green-900",e.level==="A1")("dark:text-green-200",e.level==="A1")("bg-blue-100",e.level==="A2")("text-blue-800",e.level==="A2")("dark:bg-blue-900",e.level==="A2")("dark:text-blue-200",e.level==="A2"),o(),h(" ",e.level," "),o(2),k(e.added?10:11)}}var K=class i{vocabRows=s.required();static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-vocab-widget"]],inputs:{vocabRows:[1,"vocabRows"]},decls:19,vars:0,consts:[[1,"border-t","border-[#e6e6e0]","dark:border-[#33332a]","bg-gray-50","dark:bg-[#15150a]","p-4","shrink-0"],[1,"flex","items-center","justify-between","mb-3"],[1,"text-sm","font-bold","text-text-primary","dark:text-white","uppercase","tracking-wider"],[1,"text-xs","text-primary","font-bold","hover:underline"],[1,"bg-white","dark:bg-[#1e1e12]","rounded-xl","border","border-[#e6e6e0]","dark:border-[#33332a]","overflow-hidden","shadow-sm"],[1,"w-full","text-sm","text-left"],[1,"bg-gray-50","dark:bg-[#25251a]","text-xs","uppercase","text-text-secondary","dark:text-gray-400"],[1,"px-4","py-2","font-semibold"],[1,"px-2","py-2","font-semibold","text-center"],[1,"px-2","py-2","font-semibold","text-right"],[1,"divide-y","divide-[#f0f0eb]","dark:divide-[#33332a]"],[1,"hover:bg-gray-50","dark:hover:bg-[#25251a]"],[1,"px-4","py-3"],[1,"font-medium","text-text-primary","dark:text-gray-200"],[1,"text-xs","text-text-secondary","dark:text-gray-500"],[1,"px-2","py-3","text-center"],[1,"inline-flex","items-center","justify-center","h-6","px-1.5","rounded","!text-[10px]","font-bold","uppercase","tracking-wider"],[1,"px-2","py-3","text-right","pr-4"],[1,"size-7","rounded-full","bg-white","border","border-gray-200","flex","items-center","justify-center","text-gray-400","hover:text-primary","hover:border-primary","transition-colors"],[1,"size-7","rounded-full","bg-primary","flex","items-center","justify-center","text-text-primary","hover:bg-[#e6e205]","transition-colors","shadow-sm"],[1,"material-symbols-outlined","!text-[16px]"]],template:function(e,t){e&1&&(l(0,"div",0)(1,"div",1)(2,"h4",2),a(3,"Lesson Vocabulary"),d(),l(4,"button",3),a(5,"View All"),d()(),l(6,"div",4)(7,"table",5)(8,"thead",6)(9,"tr")(10,"th",7),a(11,"Word"),d(),l(12,"th",8),a(13,"Lvl"),d(),l(14,"th",9),a(15,"Action"),d()()(),l(16,"tbody",10),M(17,Ve,12,20,"tr",11,De),d()()()()),e&2&&(o(17),D(t.vocabRows()))},styles:["[_nghost-%COMP%]{display:contents}"]})};var Pe=()=>[1,2,3];function Ie(i,n){if(i&1){let e=C();p(0,"button",5),_("click",function(){let r=b(e).$implicit,m=v(3);return g(m.setLoopCount.emit(r))}),a(1),c()}if(i&2){let e=n.$implicit,t=v(3);te("min-w-[32px] px-2 py-1 rounded-md text-[11px] font-bold transition-all "+(t.loopCount()===e?"bg-white dark:bg-[#44443a] shadow-sm text-primary":"text-[#66665c] dark:text-[#99998a] hover:text-primary")),o(),h(" ",e===1?"\u221E":e+"x"," ")}}function Ue(i,n){i&1&&(p(0,"div",8),M(1,Ie,2,3,"button",10,se),c()),i&2&&(o(),D(O(0,Pe)))}function Re(i,n){if(i&1){let e=C();p(0,"div",4)(1,"button",5),_("click",function(){b(e);let r=v();return g(r.toggleLoop.emit())}),p(2,"span",6),a(3,"repeat"),c(),p(4,"span",7),a(5,"Loop line"),c()(),w(6,Ue,3,1,"div",8),c(),p(7,"app-transcript-list",9),_("seek",function(r){b(e);let m=v();return g(m.seek.emit(r))}),c()}if(i&2){let e=v();o(),te("flex items-center gap-2 px-3 py-1.5 rounded-full border transition-all duration-200 "+(e.loopEnabled()?"bg-primary/10 border-primary/50 text-primary shadow-sm":"bg-transparent border-[#e6e6e0] dark:border-[#33332a] text-[#66665c] dark:text-[#99998a] hover:border-[#cbcbc0]")),o(5),k(e.loopEnabled()?6:-1),o(),y("subtitles",e.subtitles())("currentTime",e.currentTime())}}var J=class i{subtitles=s.required();vocabRows=s.required();currentTime=s.required();loopEnabled=s(!1);loopCount=s(1);seek=T();toggleLoop=T();setLoopCount=T();activeTab=x("transcript");static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-lesson-right-sidebar"]],inputs:{subtitles:[1,"subtitles"],vocabRows:[1,"vocabRows"],currentTime:[1,"currentTime"],loopEnabled:[1,"loopEnabled"],loopCount:[1,"loopCount"]},outputs:{seek:"seek",toggleLoop:"toggleLoop",setLoopCount:"setLoopCount"},decls:5,vars:3,consts:[[1,"w-[380px]","hidden","lg:flex","flex-col","border-l","border-[#e6e6e0]","dark:border-[#33332a]","bg-white","dark:bg-[#1a1a0b]","h-full","shrink-0"],[3,"tabChange","activeTab"],[1,"flex-1","overflow-y-auto","custom-scroll","relative"],[3,"vocabRows"],[1,"sticky","top-0","z-10","flex","items-center","justify-between","px-4","py-2","border-b","border-[#e6e6e0]","dark:border-[#33332a]","bg-white/95","dark:bg-[#1a1a0b]/95","backdrop-blur-sm"],[3,"click"],[1,"material-symbols-outlined","!text-[18px]"],[1,"text-xs","font-semibold"],[1,"flex","bg-[#f0f0eb]","dark:bg-[#2a2a1a]","rounded-lg","p-1","gap-1"],[3,"seek","subtitles","currentTime"],[3,"class"]],template:function(e,t){e&1&&(p(0,"div",0)(1,"app-sidebar-tabs",1),_("tabChange",function(m){return t.activeTab.set(m)}),c(),p(2,"div",2),w(3,Re,8,5),c(),q(4,"app-vocab-widget",3),c()),e&2&&(o(),y("activeTab",t.activeTab()),o(2),k(t.activeTab()==="transcript"?3:-1),o(),y("vocabRows",t.vocabRows()))},dependencies:[B,G,K],styles:["[_nghost-%COMP%]{display:contents}"]})};var Y=class i{http=P(be);parseVtt(n){return this.http.get(n,{responseType:"text"}).pipe(ne(e=>this.parseVttContent(e)))}parseVttContent(n){let e=n.split(/\r?\n/),t=[],r=null;for(let m=0;m<e.length;m++){let u=e[m].trim();if(!(!u||u==="WEBVTT")){if(u.includes("-->")){let[I,N]=u.split(" --> ");r={start:this.parseTime(I),end:this.parseTime(N),text:""}}else if(r){r.text=r.text?`${r.text} ${u}`:u;let I=e[m+1]?.trim();(!I||I.includes("-->"))&&(t.push(r),r=null)}}}return t}parseTime(n){let e=n.split(":"),t=0;return e.length===3?(t+=parseInt(e[0],10)*3600,t+=parseInt(e[1],10)*60,t+=parseFloat(e[2])):e.length===2&&(t+=parseInt(e[0],10)*60,t+=parseFloat(e[1])),t}static \u0275fac=function(e){return new(e||i)};static \u0275prov=ie({token:i,factory:i.\u0275fac,providedIn:"root"})};function fe(i,n){let t=!n?.manualCleanup?n?.injector?.get(Z)??P(Z):null,r=qe(n?.equal),m;n?.requireSync?m=x({kind:0},{equal:r}):m=x({kind:1,value:n?.initialValue},{equal:r});let u,I=i.subscribe({next:N=>m.set({kind:1,value:N}),error:N=>{m.set({kind:2,error:N}),u?.()},complete:()=>{u?.()}});if(n?.requireSync&&m().kind===0)throw new X(601,!1);return u=t?.onDestroy(I.unsubscribe.bind(I)),pe(()=>{let N=m();switch(N.kind){case 1:return N.value;case 2:throw N.error;case 0:throw new X(601,!1)}},{equal:n?.equal})}function qe(i=Object.is){return(n,e)=>n.kind===1&&e.kind===1&&i(n.value,e.value)}var Fe=["leftColumn"],je=()=>[],ve=class i{subtitleService=P(Y);data=ge;thumbnailUrl="https://lh3.googleusercontent.com/aida-public/AB6AXuCAFlQlVSPwcm1uAkSonM7dvZowkP5cuhc1wjixJfC1hMHF2Z2Jzd5kxfFNRmfFjqWOafbmaArDTo2BsIT7531kov0_9eJxW7F8E3NhUf5gGO0caSKcTN0IbQBFCPquGWwh-HPyqa9OpuEGMwk12m1sb0CBUOA8s22gYcLrfg3EwLzH5JCgAuGgUwH4Grb6Qn3rag6AUysg0vNWeqNOvE1zH5pmpnH3WO-7VSW_EY0Yv0JS-mQ2OiP9PYXfYliz_tDEFmWlICy3E4Pk";currentTime=x(0);subtitles=fe(this.subtitleService.parseVtt("assets/subtitles/lesson-1.vtt"));loopEnabled=x(localStorage.getItem("gf.loop.enabled")==="true");loopCount=x(Number(localStorage.getItem("gf.loop.count"))||1);loopsDone=x(0);lastLineKey=x(null);lastTime=0;ignoreNextUpdate=!1;leftColumn;exercises=[{iconName:"quiz",title:"Comprehension Check",description:"Test your understanding of the dialogue in the cafe scene.",buttonText:"Start Quiz",badgeText:"3 Questions"},{iconName:"edit_note",title:"Grammar: Accusative",description:"Fill in the blanks using the correct accusative case articles.",buttonText:"Start Practice",badgeText:"5 Questions"}];onTimeUpdate(n){this.ignoreNextUpdate?this.ignoreNextUpdate=!1:this.checkLoop(n),this.currentTime.set(n),this.lastTime=n}checkLoop(n){if(!this.loopEnabled())return;let e=this.subtitles();if(!e)return;let t=e.find(m=>this.lastTime>=m.start&&this.lastTime<m.end),r=t?`${t.start}-${t.end}`:null;if(r!==this.lastLineKey()&&(this.lastLineKey.set(r),this.loopsDone.set(0)),!!t&&n>=t.end&&this.lastTime<t.end){let m=this.loopCount();m===1?this.onSeek(t.start,!0):this.loopsDone()<m-1&&(this.loopsDone.update(u=>u+1),this.onSeek(t.start,!0))}}toggleLoop(){this.loopEnabled.update(n=>{let e=!n;return localStorage.setItem("gf.loop.enabled",String(e)),e})}setLoopCount(n){let e=n;this.loopCount.set(e),localStorage.setItem("gf.loop.count",String(e)),this.loopsDone.set(0)}onSeek(n,e=!1){e||this.loopsDone.set(0),this.ignoreNextUpdate=!0,this.leftColumn.videoPlayer.seekTo(n)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=f({type:i,selectors:[["app-video-page"]],viewQuery:function(e,t){if(e&1&&F(Fe,5),e&2){let r;U(r=R())&&(t.leftColumn=r.first)}},decls:4,vars:12,consts:[["leftColumn",""],[1,"flex-1","flex","overflow-hidden","w-full","max-w-[1440px]","mx-auto","min-h-0"],[3,"timeUpdate","videoUrl","title","levelText","durationText","thumbnailUrl","exercises"],[3,"toggleLoop","setLoopCount","seek","subtitles","vocabRows","currentTime","loopEnabled","loopCount"]],template:function(e,t){if(e&1){let r=C();p(0,"main",1)(1,"app-lesson-left-column",2,0),_("timeUpdate",function(u){return b(r),g(t.onTimeUpdate(u))}),c(),p(3,"app-lesson-right-sidebar",3),_("toggleLoop",function(){return b(r),g(t.toggleLoop())})("setLoopCount",function(u){return b(r),g(t.setLoopCount(u))})("seek",function(u){return b(r),g(t.onSeek(u))}),c()()}e&2&&(o(),y("videoUrl","assets/videos/lesson-1.mp4")("title",t.data.title)("levelText",t.data.levelText)("durationText",t.data.durationText)("thumbnailUrl",t.thumbnailUrl)("exercises",t.exercises),o(2),y("subtitles",t.subtitles()||O(11,je))("vocabRows",t.data.vocabRows)("currentTime",t.currentTime())("loopEnabled",t.loopEnabled())("loopCount",t.loopCount()))},dependencies:[z,J],styles:["[_nghost-%COMP%]{display:flex;flex:1;min-height:0}"]})};export{ve as VideoPageComponent};
