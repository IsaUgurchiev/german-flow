import{p as i,y as o}from"./chunk-QZ362A5T.js";var l=class r{STORAGE_KEY="gf.xp.total";LOG_KEY="gf.xp.log";totalXp=o(this.loadXp());xpLog=o(this.loadLog());getXp(){return this.totalXp()}getLog(){return this.xpLog()}addXp(t,e="Exercise completed"){if(t<=0)return;let a=Date.now();this.totalXp.update(s=>{let n=s+t;return this.saveXp(n),n}),this.xpLog.update(s=>{let d=[{ts:a,amount:t,reason:e},...s].slice(0,50);return this.saveLog(d),d})}loadXp(){let t=localStorage.getItem(this.STORAGE_KEY);if(!t)return 0;let e=parseInt(t,10);return isNaN(e)?0:e}saveXp(t){localStorage.setItem(this.STORAGE_KEY,t.toString())}loadLog(){let t=localStorage.getItem(this.LOG_KEY);if(!t)return[];try{let e=JSON.parse(t);return Array.isArray(e)?e:[]}catch{return[]}}saveLog(t){localStorage.setItem(this.LOG_KEY,JSON.stringify(t))}hydrate(t,e){this.totalXp.set(t),this.xpLog.set(e),this.saveXp(t),this.saveLog(e)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};var g=class r{STORAGE_KEY="gf.words.saved";words=o(this.loadWords());getAll(){return this.words()}loadWords(){let t=localStorage.getItem(this.STORAGE_KEY);if(!t)return[];try{let e=JSON.parse(t);return Array.isArray(e)?e:[]}catch{return[]}}add(t){let e=this.words(),a=t.toLowerCase().trim();if(!e.includes(a)){let s=[...e,a];this.words.set(s),this.save(s)}}remove(t){let e=this.words(),a=t.toLowerCase().trim(),s=e.filter(n=>n!==a);s.length!==e.length&&(this.words.set(s),this.save(s))}isSaved(t){return this.words().includes(t.toLowerCase().trim())}clearAll(){this.words.set([]),localStorage.removeItem(this.STORAGE_KEY)}save(t){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(t))}hydrate(t){this.words.set(t),this.save(t)}static \u0275fac=function(e){return new(e||r)};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};var p=class r{LAST_LESSON_KEY="gf.last.lessonId";lastLessonId=o(localStorage.getItem(this.LAST_LESSON_KEY));setLastLessonId(t){this.lastLessonId.set(t),localStorage.setItem(this.LAST_LESSON_KEY,t)}hydrate(t){t&&(this.lastLessonId.set(t),localStorage.setItem(this.LAST_LESSON_KEY,t))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};export{l as a,g as b,p as c};
