import{i,r as n}from"./chunk-6XIKHDVE.js";var p=class r{STORAGE_KEY="gf.xp.total";LOG_KEY="gf.xp.log";totalXp=n(this.loadXp());xpLog=n(this.loadLog());getXp(){return this.totalXp()}getLog(){return this.xpLog()}addXp(t,e="Exercise completed"){if(t<=0)return;let g=Date.now();this.totalXp.update(o=>{let a=o+t;return this.saveXp(a),a}),this.xpLog.update(o=>{let s=[{ts:g,amount:t,reason:e},...o].slice(0,50);return this.saveLog(s),s})}loadXp(){let t=localStorage.getItem(this.STORAGE_KEY);if(!t)return 0;let e=parseInt(t,10);return isNaN(e)?0:e}saveXp(t){localStorage.setItem(this.STORAGE_KEY,t.toString())}loadLog(){let t=localStorage.getItem(this.LOG_KEY);if(!t)return[];try{let e=JSON.parse(t);return Array.isArray(e)?e:[]}catch{return[]}}saveLog(t){localStorage.setItem(this.LOG_KEY,JSON.stringify(t))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=i({token:r,factory:r.\u0275fac,providedIn:"root"})};export{p as a};
